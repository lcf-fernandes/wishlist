{"1749830218184":{"actionType":"saveAll","createdAt":"1749830218184","actionID":"1749830218184","userID":"#TEMP","path":"system.capsules.1093f153-652d-4019-993e-6389e304508d.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"async () => {\n  try {\n    const response = await fetch(\"https://www.cheapshark.com/api/1.0/deals?storeID=1&pageSize=100\", {\n      method: \"GET\",\n      redirect: \"follow\",\n    });\n\n    const result = await response.json();\n\n    // Filtra para manter apenas uma oferta por jogo (pelo lower price)\n    const uniqueGames = {};\n\n    result.forEach((deal) => {\n      const gameID = deal.gameID;\n\n      if (!uniqueGames[gameID] || parseFloat(deal.salePrice) < parseFloat(uniqueGames[gameID].salePrice)) {\n        uniqueGames[gameID] = deal;\n      }\n    });\n\n    const bestDeals = Object.values(uniqueGames);\n\n    console.log(bestDeals); // Mostra somente as melhores ofertas únicas por jogo\n\n    const path1 = \"scA0.gameList\";\n    const pass1 = { keyPath: [path1], value: [bestDeals] };\n\n    tools.functions.setVar({ args: \"\", pass: pass1 });\n\n  } catch (error) {\n    console.log(\"Erro ao buscar jogos:\", error);\n  }\n};\n","newValue":"async () => {\n  try {\n    const response = await fetch(\"https://www.cheapshark.com/api/1.0/deals?storeID=1&pageSize=100\", {\n      method: \"GET\",\n      redirect: \"follow\",\n    });\n\n    const result = await response.json();\n\n    // Filtra para manter apenas uma oferta por jogo (pelo lower price)\n    const uniqueGames = {};\n\n    result.forEach((deal) => {\n      const gameID = deal.gameID;\n\n      if (!uniqueGames[gameID] || parseFloat(deal.salePrice) < parseFloat(uniqueGames[gameID].salePrice)) {\n        uniqueGames[gameID] = deal;\n      }\n    });\n\n    const bestDeals = Object.values(uniqueGames);\n\n    console.log(bestDeals); // Mostra somente as melhores ofertas únicas por jogo\n\n    const path1 = \"scA0.gameList\";\n    const pass1 = { keyPath: [path1], value: [bestDeals] };\n\n    tools.functions.setVar({ args: \"\", pass: pass1 });\n\n  } catch (error) {\n    console.log(\"Erro ao buscar jogos:\", error);\n  }\n}"}}